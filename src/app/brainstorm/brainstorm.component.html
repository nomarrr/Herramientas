<div class="brainstorm-container">
  <div class="header">
    <h3>
      <span class="icono-idea">💡</span>
      {{ titulo }}
    </h3>
    <p class="descripcion">
      {{ descripcion }}
    </p>
  </div>

  <div class="ideas-section">
    <h3>
      <span class="icon">💡</span>
      Mis Ideas
      <span class="contador">{{ ideas.length }} / {{ maxIdeas }}</span>
    </h3>
    
    <div class="ideas-list">
      <div *ngIf="ideas.length === 0" class="empty-message">
        <span class="icon">📝</span>
        <p>No hay ideas aún. ¡Sé el primero en aportar!</p>
      </div>
      
      <div *ngFor="let idea of ideas; let i = index" class="idea-bubble">
        <ng-container *ngIf="editIndex !== i; else editBlock">
          <div class="idea-content">
            <div class="idea-text">{{ idea.idea }}</div>
          </div>
          <div class="idea-actions">
            <button class="edit-btn" (click)="startEdit(i)" title="Editar idea">
              <img src="/img/edit.svg" alt="Editar" />
            </button>
            <button class="delete-btn" (click)="deleteIdea(i)" [disabled]="!puedeEliminarIdeas" title="Eliminar idea">
              <img src="/img/delete.svg" alt="Eliminar" />
            </button>
          </div>
        </ng-container>
        <ng-template #editBlock>
          <input [(ngModel)]="editValue" maxlength="100" placeholder="Edita tu idea..." />
          <div class="idea-actions">
            <button class="save-btn" (click)="saveEdit(i)" title="Guardar cambios">
              <img src="/img/save.svg" alt="Guardar" />
            </button>
            <button class="cancel-btn" (click)="cancelEdit()" title="Cancelar edición">
              Cancelar
            </button>
          </div>
        </ng-template>
      </div>
    </div>
  </div>

  <div class="input-area">
    <input
      [(ngModel)]="newIdea"
      [disabled]="!puedeAgregarIdeas"
      (keyup.enter)="addIdea()"
      placeholder="Escribe tu idea aquí..."
      maxlength="100"
    />
    <button (click)="addIdea()" [disabled]="!puedeAgregarIdeas || !newIdea.trim()">
      Agregar Idea
    </button>
  </div>
  
  <div class="counter">
    {{ ideas.length }} / {{ maxIdeas }} ideas
  </div>
  
  <div *ngIf="mensajeValidacion" class="validation-message">
    {{ mensajeValidacion }}
  </div>
</div>
