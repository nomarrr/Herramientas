<div class="voting-container">
  <div class="header">
    <h2>
      üó≥Ô∏è Votaci√≥n de Categor√≠as
    </h2>
  </div>

  <div class="categorias-grid">
    <mat-card *ngFor="let categoria of categorias" class="categoria-card">
      <mat-card-header>
        <mat-card-title>{{categoria.nombre}}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="vote-info">
          <p>Votos: {{getCategoriaVoteCount(categoria.id)}}</p>
          <p>Porcentaje: {{getCategoriaVotePercentage(categoria.id) | number:'1.0-2'}}%</p>
          <p *ngIf="totalUsuariosDecisores > 0"><em>(Total decisores: {{totalUsuariosDecisores}})</em></p>
        </div>
        <div class="vote-actions">
          <button mat-raised-button color="primary" (click)="emitirVoto(categoria.id)" [disabled]="isVoteButtonDisabled(categoria.id)">
            Votar
          </button>
           <button mat-stroked-button color="warn" (click)="eliminarVoto(categoria.id)" [disabled]="isRemoveVoteButtonDisabled(categoria.id)">
            Quitar Voto
          </button>
        </div>
        <div class="vote-status" *ngIf="getCategoriaVotePercentage(categoria.id) > 0">
            <span *ngIf="cumpleUmbral(categoria.id)" class="umbral-aprobado">‚úÖ Cumple umbral (60%+)</span>
            <span *ngIf="!cumpleUmbral(categoria.id)" class="umbral-pendiente">‚è≥ No cumple umbral (60%+)</span>
        </div>

      </mat-card-content>
    </mat-card>

    <div class="empty-state" *ngIf="categorias.length === 0">
      <span class="icon">üìã</span>
      <p>No hay categor√≠as disponibles para votar.</p>
    </div>
  </div>
</div> 